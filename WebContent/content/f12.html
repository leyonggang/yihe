<div class="breadcrumbs">
    <ul class="breadcrumb">
        <li>
            <i class="glyphicon glyphicon-sort"></i> 管网监测数据
        </li>
    </ul>
</div>
<div class="page-content">
    <div class="page-content-area">
        <div class="row">
            <div class="col-md-12">
                <div id="toolbar" class="btn-group">
                    <div class="form-group">
                        <div class="input-group">
                            <label>片区：</label>
                            <select id="dept">
                                <option value="安东北">安东北</option>
                                <option value="安东南">安东南</option>
                                <option value="安漳区">安漳区</option>
                                <option value="灯塔路">灯塔路</option>
                                <option value="洹北区">洹北区</option>
                                <option value="开发区">开发区</option>
                                <option value="平原区">平原区</option>
                                <option value="三角湖">三角湖</option>
                                <option value="铁西北">铁西北</option>
                                <option value="铁西南">铁西南</option>
                            </select>
                        </div>
                    </div>
                </div>
                <table id="tangOne" class="table-responsive">
                    <thead>
                        <tr>
                            <th data-field="dt1t1">大唐出口1供温</th>
                            <th data-field="dt1t2">大唐出口1回温</th>
                            <th data-field="dt1p1">大唐出口1供压</th>
                            <th data-field="dt1p2">大唐出口1回压</th>
                            <th data-field="dt1flow1">大唐出口1供水流量</th>
                            <th data-field="dt1flow2">大唐出口1回水流量</th>
                            <th data-field="dt1flow3">大唐出口1补水流量1</th>
                            <th data-field="dt1flow4">大唐出口1补水流量2</th>
                            <th data-field="dt1mw">大唐出口1瞬间热量</th>
                            <th data-field="dt1auuc1">大唐出口1累计流量</th>
                            <th data-field="dt1auuc2">大唐出口1回水累计</th>
                            <th data-field="dt1gj">大唐出口1累计热量</th>
                            <th data-field="dt1auuc3">大唐出口1补水累计1</th>
                            <th data-field="dt1auuc4">大唐出口1补水累计2</th>
                        </tr>
                    </thead>
                </table>
                <table id="tangTwo" class="table-responsive">
                    <thead>
                        <tr>
                            <th data-field="dt3t1">大唐出口2供温</th>
                            <th data-field="dt3t2">大唐出口2回温</th>
                            <th data-field="dt3p1">大唐出口2供压</th>
                            <th data-field="dt3p2">大唐出口2回压</th>
                            <th data-field="dt3flow1">大唐出口2供水流量</th>
                            <th data-field="dt3flow2">大唐出口2回水流量</th>
                            <th data-field="dt3flow3">大唐出口2补水流量1</th>
                            <th data-field="dt3mw">大唐出口2瞬间热量</th>
                            <th data-field="dt3auuc1">大唐出口2累计流量</th>
                            <th data-field="dt3auuc2">大唐出口2回水累计</th>
                            <th data-field="dt3gj">大唐出口2累计热量</th>
                            <th data-field="dt3auuc3">大唐出口2补水累计1</th>
                        </tr>
                    </thead>
                </table>

                <table id="table" class="table-responsive">
                    <thead>
                        <tr>
                            <th data-field="dt" data-width="20">时间</th>
                            <th data-field="PQ" data-width="50">片区</th>
                            <th data-field="name" data-width="80">换热站名称</th>
                            <th data-field="T1">一次网供温</th>
                            <th data-field="T2">一次网回温</th>
                            <th data-field="P1">一次网供压</th>
                            <th data-field="P2">一次网回压</th>
                            <th data-field="CRL2">一次网流量t/h</th>
                            <th data-field="CRL4">一次网热量GJ/h</th>
                            <th data-field="AIW1">一次网阀开</th>
                            <th data-field="T3">二次网供温</th>
                            <th data-field="T4">二次网回温</th>
                            <th data-field="P3">二次网供压</th>
                            <th data-field="P4">二次网回压</th>
                            <th data-field="FM5">用户阀门</th>
                            <th data-field="FM1">调节阀开度供水</th>
                            <th data-field="FM2">调节阀开度回水</th>
                            <th data-field="FM3">站内阀门开度供水</th>
                            <th data-field="FM4">站内阀门开度回水</th>
                        </tr>
                    </thead>
                </table>

            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $("#dept").on("change", function () {
            $('#table').bootstrapTable("refresh", {
                query: {
                    stra: $(this).val()
                }
            });
        });
        //        var gwname = user.obja.dept.gwname;
        //        if (gwname == '管理部门') gwname = '安东北';
        //        $("#dept").val(gwname);
        //        if (user.obja.dept.type == 1) {
        //            $("#dept").attr("disabled", "disabled");
        //        }
        //        $('#table').bootstrapTable({
        //            method: "get",
        //            url: "outPrint!f12Datagrid.action",
        //            queryParams: {
        //                stra: gwname
        //            },
        //            dataType: "json",
        //            search: true,
        //            toolbar: "#toolbar",
        //            pagination: true
        //        });
        $.get("data.json", function (data) {
            var strData = JSON.stringify(data.data),
            regex=/("dt3\w+":\d(\.\d+)?,?)/g,
            newStr="{";
            while(regex.exec(strData)){
                newStr+=RegExp.$1;
            }
            newStr+="}";
            newStr.replace(/dt3/ig,"dt1");
            console.log(newStr);
            $('#tangOne').bootstrapTable({
                data: [data.data]
            });
        }, "json");
    });
</script>
